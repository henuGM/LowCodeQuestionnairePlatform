"use strict";(self.webpackChunkwenjuan=self.webpackChunkwenjuan||[]).push([[868],{34170:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var s=n(65043),c=n(73216),i=n(42919),a=n(86491),l=n(87021),o=n(80788),r=n(39926),d=n(6561),p=n(29752),x=n(51118),m=n(6051),j=n(25389),u=n(96651),h=n(36282),_=n(9025),y=n(66885),A=n(682),v=n(81803);const S="StatHeader_header-wrapper__b8JLM",C="StatHeader_header__8MEa7",g="StatHeader_left__OkrfJ",f="StatHeader_h1__qdgx0",w="StatHeader_right__5Y-Xw",k="StatHeader_main__tcJ3D";var N=n(70579);const{Title:T}=p.A,I=()=>{const e=(0,c.Zp)(),{id:t}=(0,c.g)(),{title:n,isPublished:i}=(0,d.A)(),a=(0,s.useRef)(null);function o(){const e=a.current;null!=e&&(e.select(),document.execCommand("copy"),x.Ay.success("\u62f7\u8d1d\u6210\u529f"))}const r=(0,s.useMemo)((()=>{if(!i)return null;const e="http://localhost:3000/question/".concat(t),n=(0,N.jsx)("div",{style:{textAlign:"center"},children:(0,N.jsx)(v.Ay,{value:e,size:150})});return(0,N.jsxs)(m.A,{style:{marginTop:"3px"},children:[(0,N.jsx)(j.A,{value:e,style:{width:"300px"},ref:a}),(0,N.jsx)(u.A,{title:"\u62f7\u8d1d\u94fe\u63a5",children:(0,N.jsx)(l.Ay,{icon:(0,N.jsx)(_.A,{}),onClick:o})}),(0,N.jsx)(h.A,{content:n,children:(0,N.jsx)(l.Ay,{icon:(0,N.jsx)(y.A,{})})})]})}),[t,i]);return(0,N.jsx)("div",{className:S,children:(0,N.jsxs)("div",{className:C,children:[(0,N.jsx)("div",{className:g,children:(0,N.jsxs)(m.A,{children:[(0,N.jsx)(l.Ay,{type:"link",icon:(0,N.jsx)(A.A,{}),onClick:()=>e(-1),children:"\u8fd4\u56de"}),(0,N.jsx)(T,{className:f,children:n})]})}),(0,N.jsx)("div",{className:k,children:r}),(0,N.jsx)("div",{className:w,children:(0,N.jsx)(l.Ay,{style:{marginTop:"3px"},type:"primary",onClick:()=>e("/question/edit/".concat(t)),children:"\u7f16\u8f91\u95ee\u5377"})})]})})};var H=n(98139),b=n.n(H),L=n(31579),z=n(82925);const F="ComponentList_container__OMWM1",M="ComponentList_component-wrapper__oYOds",q="ComponentList_selected__6ci7t",D="ComponentList_component__5JvFj",J=e=>{const{selectedComponentId:t,setSelectedComponentId:n,setSelectedComponentType:s}=e,{componentList:c}=(0,L.A)();return(0,N.jsx)("div",{className:F,children:c.filter((e=>!e.isHidden)).map((e=>{const{fe_id:c,props:i,type:a}=e,l=(0,z.T)(a);if(null==l)return null;const{Component:o}=l,r=M,d=q,p=b()({[r]:!0,[d]:c===t});return(0,N.jsx)("div",{className:p,onClick:()=>{n(c),s(a)},children:(0,N.jsx)("div",{className:D,children:(0,N.jsx)(o,{...i})})},c)}))})};var O=n(56833),Y=n(68292),E=n(26998),P=n(55293);var R=n(29515);const{Title:Z}=p.A,W=e=>{const{selectedComponentId:t,setSelectedComponentId:n,setSelectedComponentType:a}=e,{id:l=""}=(0,c.g)(),[o,r]=(0,s.useState)(1),[d,p]=(0,s.useState)(R.zv),[x,m]=(0,s.useState)(0),[j,u]=(0,s.useState)([]),{loading:h}=(0,E.A)((async()=>await async function(e,t){const n="/api/stat/".concat(e);return await P.A.get(n,{params:t})}(l,{page:o,pageSize:d})),{refreshDeps:[l,o,d],onSuccess(e){const{total:t,list:n=[]}=e;m(t),u(n)}}),{componentList:_}=(0,L.A)(),y=_.map((e=>{const{fe_id:s,title:c,props:i={},type:l}=e,o=i.title||c;return{title:(0,N.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{n(s),a(l)},children:(0,N.jsx)("span",{style:{color:s===t?"#1890ff":"inherit"},children:o})}),dataIndex:s}})),A=j.map((e=>({...e,key:e._id}))),v=(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(O.A,{columns:y,dataSource:A,pagination:!1}),(0,N.jsx)("div",{style:{textAlign:"center",marginTop:"18px"},children:(0,N.jsx)(Y.A,{total:x,pageSize:d,current:o,onChange:e=>r(e),onShowSizeChange:(e,t)=>{r(e),p(t)}})})]});return(0,N.jsxs)("div",{children:[(0,N.jsxs)(Z,{level:3,children:["\u7b54\u5377\u6570\u91cf: ",!h&&x]}),h&&(0,N.jsx)("div",{style:{textAlign:"center"},children:(0,N.jsx)(i.A,{})}),!h&&v]})},{Title:X}=p.A,B=e=>{const{selectedComponentId:t,selectedComponentType:n}=e,{id:i=""}=(0,c.g)(),[a,l]=(0,s.useState)([]),{run:o}=(0,E.A)((async(e,t)=>await async function(e,t){const n="/api/stat/".concat(e,"/").concat(t);return await P.A.get(n)}(e,t)),{manual:!0,onSuccess(e){l(e.stat)}});return(0,s.useEffect)((()=>{t&&o(i,t)}),[i,t]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(X,{level:3,children:"\u56fe\u8868\u7edf\u8ba1"}),(0,N.jsx)("div",{children:function(){if(!t)return(0,N.jsx)("div",{children:"\u672a\u9009\u4e2d\u7ec4\u4ef6"});const{StatComponent:e}=(0,z.T)(n)||{};return null==e?(0,N.jsx)("div",{children:"\u8be5\u7ec4\u4ef6\u65e0\u7edf\u8ba1\u56fe\u8868"}):(0,N.jsx)(e,{stat:a})}()})]})},G="Stat_container__bkqFv",K="Stat_content-wrapper__x5fxk",Q="Stat_content__ziDc1",U="Stat_left__y5dHw",V="Stat_main__D4R-H",$="Stat_right__50SCY",ee=()=>{const e=(0,c.Zp)(),{loading:t}=(0,r.A)(),{title:n,isPublished:p}=(0,d.A)(),[x,m]=(0,s.useState)(""),[j,u]=(0,s.useState)("");(0,o.A)("\u95ee\u5377\u7edf\u8ba1 - ".concat(n));const h=(0,N.jsx)("div",{style:{textAlign:"center",marginTop:"60px"},children:(0,N.jsx)(i.A,{})});return(0,N.jsxs)("div",{className:G,children:[(0,N.jsx)(I,{}),(0,N.jsxs)("div",{className:K,children:[t&&h,!t&&(0,N.jsx)("div",{className:Q,children:"boolean"!==typeof p||p?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:U,children:(0,N.jsx)(J,{selectedComponentId:x,setSelectedComponentId:m,setSelectedComponentType:u})}),(0,N.jsx)("div",{className:V,children:(0,N.jsx)(W,{selectedComponentId:x,setSelectedComponentId:m,setSelectedComponentType:u})}),(0,N.jsx)("div",{className:$,children:(0,N.jsx)(B,{selectedComponentId:x,selectedComponentType:j})})]}):(0,N.jsx)("div",{style:{flex:"1"},children:(0,N.jsx)(a.Ay,{status:"warning",title:"\u8be5\u9875\u9762\u5c1a\u672a\u53d1\u5e03",extra:(0,N.jsx)(l.Ay,{type:"primary",onClick:()=>e(-1),children:"\u8fd4\u56de"})})})})]})]})}}}]);
//# sourceMappingURL=statPage.7ef10163.chunk.js.map